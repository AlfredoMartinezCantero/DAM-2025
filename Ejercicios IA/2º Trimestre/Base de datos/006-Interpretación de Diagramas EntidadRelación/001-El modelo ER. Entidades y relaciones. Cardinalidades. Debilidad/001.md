# Introducción:
En este ejercicio he diseñado la estructura de base de datos para una tienda online, partiendo de la identificación de las entidades principales: `Cliente, Pedido y Producto`.

Para conectar estas entidades correctamente, he tenido que resolver una relación (N:M) entre Pedidos y Productos, como aprendí en los apuntes de cardinalidad, un pedido puede tener varios productos y un producto puede estar en varios pedidos, para solucionar esto no puedo poner un `id_producto` directamente en la tabla de pedidos, para ello he creado una tabla intermedia llamada `LineaPedido`, esta tabla actúa como nexo almacenando qué productos van en qué pedido y en qué cantidad, por último he definido atributos clave como el email para los clientes y he asegurado la integridad referencial mediante claves foráneas que apuntan a las claves primarias de las entidades padre.

**BBDD**

---
```
-- Tabla de Clientes
CREATE TABLE Cliente (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    apellidos VARCHAR(100) NOT NULL,
    email VARCHAR(150) NOT NULL UNIQUE
);

-- Tabla de Pedidos
CREATE TABLE Pedido (
    id INT AUTO_INCREMENT PRIMARY KEY,
    fecha DATETIME DEFAULT CURRENT_TIMESTAMP,
    cliente_id INT NOT NULL,
    CONSTRAINT fk_pedido_cliente 
        FOREIGN KEY (cliente_id) REFERENCES Cliente(id)
        ON UPDATE CASCADE
        ON DELETE RESTRICT
);

-- Tabla LineaPedido
CREATE TABLE LineaPedido (
    id INT AUTO_INCREMENT PRIMARY KEY,
    pedido_id INT NOT NULL,
    producto_id INT NOT NULL,
    cantidad INT NOT NULL DEFAULT 1,
    CONSTRAINT fk_linea_pedido 
        FOREIGN KEY (pedido_id) REFERENCES Pedido(id)
        ON UPDATE CASCADE
        ON DELETE CASCADE,
    CONSTRAINT fk_linea_producto 
        FOREIGN KEY (producto_id) REFERENCES Producto(id)
        ON UPDATE CASCADE
        ON DELETE RESTRICT
);

-- Tabla de Productos
CREATE TABLE Producto (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    precio DECIMAL(10, 2) NOT NULL CHECK (precio >= 0)
);
```
---

**DIAGRAMA EN JSON**

---
```
{
  "formas": [
    {
      "id": "forma-2",
      "tipo": "entity",
      "left": "414px",
      "top": "237px",
      "width": "",
      "height": "",
      "entityName": "cliente",
      "properties": [
        {
          "id": "prop-1",
          "name": "id"
        },
        {
          "id": "prop-2",
          "name": "nombre"
        },
        {
          "id": "prop-3",
          "name": "email"
        }
      ]
    },
    {
      "id": "forma-3",
      "tipo": "entity",
      "left": "690px",
      "top": "248px",
      "width": "",
      "height": "",
      "entityName": "pedido",
      "properties": [
        {
          "id": "prop-4",
          "name": "id"
        },
        {
          "id": "prop-5",
          "name": "fecha"
        }
      ]
    },
    {
      "id": "forma-4",
      "tipo": "entity",
      "left": "941px",
      "top": "249px",
      "width": "",
      "height": "",
      "entityName": "linea_pedido",
      "properties": [
        {
          "id": "prop-6",
          "name": "id"
        },
        {
          "id": "prop-7",
          "name": "cantidad"
        }
      ]
    },
    {
      "id": "forma-5",
      "tipo": "entity",
      "left": "1191px",
      "top": "264px",
      "width": "",
      "height": "",
      "entityName": "producto",
      "properties": [
        {
          "id": "prop-8",
          "name": "id"
        }
      ]
    }
  ],
  "flechas": [
    {
      "desde": {
        "shapeId": "forma-2",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-3",
        "propId": null,
        "side": null
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-4",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-5",
        "propId": null,
        "side": null
      },
      "tipo": "simple",
      "estilo": "straight"
    },
    {
      "desde": {
        "shapeId": "forma-3",
        "propId": null,
        "side": null
      },
      "hasta": {
        "shapeId": "forma-4",
        "propId": null,
        "side": null
      },
      "tipo": "simple",
      "estilo": "straight"
    }
  ]
}
```
---
# Conclusión:
Este ejercicio ayuda a comprender el proceso de normalización de una base de datos, enseñando que identificar correctamente las entidades y sus atributos es solo el primer paso, lo crítico es establecer las relaciones adecuadas, específicamente, he comprendido la importancia de la tabla `LineaPedido` puesto que sin ella sería imposible registrar una compra con múltiples artículos sin duplicar información del pedido, además al definir las `Foreign Keys` aseguro que no puedan existir pedidos sin cliente o líneas de pedido que hagan referencia a productos inexistentes, manteniendo la integridad de los datos tal como vimos en el ejercicio de la biblioteca.